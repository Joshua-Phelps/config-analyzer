{
	"$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {},
	"variables": {},
	"resources": [
		{
			"type": "microsoft.insights/components",
			"apiVersion": "2020-02-02-preview",
			"name": "josh-function-app",
			"location": "centralus",
			"kind": "web",
			"properties": {
				"Application_Type": "web",
				"Flow_Type": "Redfield",
				"Request_Source": "IbizaWebAppExtensionCreate",
				"WorkspaceResourceId": "/subscriptions/6c1f4f3b-f65f-4667-8f9e-b9c48e09cd6b/resourcegroups/defaultresourcegroup-wus2/providers/microsoft.operationalinsights/workspaces/defaultworkspace-6c1f4f3b-f65f-4667-8f9e-b9c48e09cd6b-wus2",
				"IngestionMode": "LogAnalytics",
				"publicNetworkAccessForIngestion": "Enabled",
				"publicNetworkAccessForQuery": "Enabled"
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones",
			"apiVersion": "2018-09-01",
			"name": "privatelink.azurewebsites.net",
			"location": "global",
			"properties": {
				"maxNumberOfRecordSets": 25000,
				"maxNumberOfVirtualNetworkLinks": 1000,
				"maxNumberOfVirtualNetworkLinksWithRegistration": 100,
				"numberOfRecordSets": 3,
				"numberOfVirtualNetworkLinks": 0,
				"numberOfVirtualNetworkLinksWithRegistration": 0,
				"provisioningState": "Succeeded"
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones",
			"apiVersion": "2018-09-01",
			"name": "privatelink.blob.core.windows.net",
			"location": "global",
			"properties": {
				"maxNumberOfRecordSets": 25000,
				"maxNumberOfVirtualNetworkLinks": 1000,
				"maxNumberOfVirtualNetworkLinksWithRegistration": 100,
				"numberOfRecordSets": 2,
				"numberOfVirtualNetworkLinks": 0,
				"numberOfVirtualNetworkLinksWithRegistration": 0,
				"provisioningState": "Succeeded"
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones",
			"apiVersion": "2018-09-01",
			"name": "privatelink.file.core.windows.net",
			"location": "global",
			"properties": {
				"maxNumberOfRecordSets": 25000,
				"maxNumberOfVirtualNetworkLinks": 1000,
				"maxNumberOfVirtualNetworkLinksWithRegistration": 100,
				"numberOfRecordSets": 2,
				"numberOfVirtualNetworkLinks": 0,
				"numberOfVirtualNetworkLinksWithRegistration": 0,
				"provisioningState": "Succeeded"
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones",
			"apiVersion": "2018-09-01",
			"name": "privatelink.servicebus.windows.net",
			"location": "global",
			"properties": {
				"maxNumberOfRecordSets": 25000,
				"maxNumberOfVirtualNetworkLinks": 1000,
				"maxNumberOfVirtualNetworkLinksWithRegistration": 100,
				"numberOfRecordSets": 2,
				"numberOfVirtualNetworkLinks": 0,
				"numberOfVirtualNetworkLinksWithRegistration": 0,
				"provisioningState": "Succeeded"
			}
		},
		{
			"type": "Microsoft.Network/virtualNetworks",
			"apiVersion": "2020-08-01",
			"name": "functionVNET",
			"location": "centralus",
			"properties": {
				"addressSpace": { "addressPrefixes": [ "10.1.0.0/16" ] },
				"subnets": [
					{
						"name": "default",
						"properties": {
							"addressPrefix": "10.1.0.0/24",
							"delegations": [],
							"privateEndpointNetworkPolicies": "Disabled",
							"privateLinkServiceNetworkPolicies": "Enabled"
						}
					},
					{
						"name": "functions",
						"properties": {
							"addressPrefix": "10.1.1.0/24",
							"delegations": [
								{
									"name": "delegation",
									"properties": { "serviceName": "Microsoft.Web/serverfarms" }
								}
							],
							"privateEndpointNetworkPolicies": "Enabled",
							"privateLinkServiceNetworkPolicies": "Enabled"
						}
					}
				],
				"virtualNetworkPeerings": [],
				"enableDdosProtection": false
			}
		},
		{
			"type": "Microsoft.ServiceBus/namespaces",
			"apiVersion": "2018-01-01-preview",
			"name": "joshServiceBus",
			"location": "Central US",
			"sku": {
				"name": "Premium",
				"tier": "Premium",
				"capacity": 1
			},
			"properties": { "zoneRedundant": false }
		},
		{
			"type": "Microsoft.Storage/storageAccounts",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage",
			"location": "centralus",
			"sku": {
				"name": "Standard_RAGRS",
				"tier": "Standard"
			},
			"kind": "StorageV2",
			"properties": {
				"minimumTlsVersion": "TLS1_2",
				"allowBlobPublicAccess": true,
				"allowSharedKeyAccess": true,
				"networkAcls": {
					"bypass": "AzureServices",
					"virtualNetworkRules": [],
					"ipRules": [],
					"defaultAction": "Allow"
				},
				"supportsHttpsTrafficOnly": true,
				"encryption": {
					"services": {
						"file": {
							"keyType": "Account",
							"enabled": true
						},
						"blob": {
							"keyType": "Account",
							"enabled": true
						}
					},
					"keySource": "Microsoft.Storage"
				},
				"accessTier": "Hot"
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts",
			"apiVersion": "2021-01-01",
			"name": "storageaccountjoshfa6db",
			"location": "centralus",
			"sku": {
				"name": "Standard_LRS",
				"tier": "Standard"
			},
			"kind": "Storage",
			"properties": {
				"minimumTlsVersion": "TLS1_2",
				"networkAcls": {
					"bypass": "AzureServices",
					"virtualNetworkRules": [],
					"ipRules": [],
					"defaultAction": "Allow"
				},
				"supportsHttpsTrafficOnly": true,
				"encryption": {
					"services": {
						"file": {
							"keyType": "Account",
							"enabled": true
						},
						"blob": {
							"keyType": "Account",
							"enabled": true
						}
					},
					"keySource": "Microsoft.Storage"
				}
			}
		},
		{
			"type": "Microsoft.Web/serverfarms",
			"apiVersion": "2018-02-01",
			"name": "ASP-joshfunctiontutorial-9c13",
			"location": "Central US",
			"sku": {
				"name": "EP1",
				"tier": "ElasticPremium",
				"size": "EP1",
				"family": "EP",
				"capacity": 1
			},
			"kind": "elastic",
			"properties": {
				"perSiteScaling": false,
				"maximumElasticWorkerCount": 20,
				"isSpot": false,
				"reserved": false,
				"isXenon": false,
				"hyperV": false,
				"targetWorkerCount": 0,
				"targetWorkerSizeId": 0
			}
		},
		{
			"type": "microsoft.alertsmanagement/smartdetectoralertrules",
			"apiVersion": "2019-06-01",
			"name": "failure anomalies - josh-function-app",
			"location": "global",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"description": "Failure Anomalies notifies you of an unusual rise in the rate of failed HTTP requests or dependency calls.",
				"state": "Enabled",
				"severity": "Sev3",
				"frequency": "PT1M",
				"detector": {
					"id": "FailureAnomaliesDetector",
					"name": "Failure Anomalies",
					"description": "Detects if your application experiences an abnormal rise in the rate of HTTP requests or dependency calls that are reported as failed. The anomaly detection uses machine learning algorithms and occurs in near real time, therefore there's no need to define a frequency for this signal.<br/></br/>To help you triage and diagnose the problem, an analysis of the characteristics of the failures and related telemetry is provided with the detection. This feature works for any app, hosted in the cloud or on your own servers, that generates request or dependency telemetry - for example, if you have a worker role that calls <a class=\"ext-smartDetecor-link\" href=\\\"https://docs.microsoft.com/azure/application-insights/app-insights-api-custom-events-metrics#trackrequest\\\" target=\\\"_blank\\\">TrackRequest()</a> or <a class=\"ext-smartDetecor-link\" href=\\\"https://docs.microsoft.com/azure/application-insights/app-insights-api-custom-events-metrics#trackdependency\\\" target=\\\"_blank\\\">TrackDependency()</a>.<br/><br/><a class=\"ext-smartDetecor-link\" href=\\\"https://docs.microsoft.com/azure/azure-monitor/app/proactive-failure-diagnostics\\\" target=\\\"_blank\\\">Learn more about Failure Anomalies</a><br><br><b>A note about your data privacy:</b><br><br>The service is entirely automatic and only you can see these notifications. <a class=\\\"ext-smartDetecor-link\\\" href=\\\"https://docs.microsoft.com/en-us/azure/azure-monitor/app/data-retention-privacy\\\" target=\\\"_blank\\\">Read more about data privacy</a><br><br>Smart Alerts conditions can't be edited or added for now.",
					"supportedResourceTypes": [ "ApplicationInsights" ]
				},
				"scope": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
				"actionGroups": { "groupIds": [ "/subscriptions/6c1f4f3b-f65f-4667-8f9e-b9c48e09cd6b/resourcegroups/aza-sds/providers/microsoft.insights/actiongroups/application insights smart detection" ] }
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/degradationindependencyduration",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "degradationindependencyduration",
					"DisplayName": "Degradation in dependency duration",
					"Description": "Smart Detection rules notify you of performance anomaly issues.",
					"HelpUrl": "https://docs.microsoft.com/en-us/azure/application-insights/app-insights-proactive-performance-diagnostics",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": false,
					"SupportsEmailNotifications": true
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/degradationinserverresponsetime",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "degradationinserverresponsetime",
					"DisplayName": "Degradation in server response time",
					"Description": "Smart Detection rules notify you of performance anomaly issues.",
					"HelpUrl": "https://docs.microsoft.com/en-us/azure/application-insights/app-insights-proactive-performance-diagnostics",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": false,
					"SupportsEmailNotifications": true
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/digestMailConfiguration",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "digestMailConfiguration",
					"DisplayName": "Digest Mail Configuration",
					"Description": "This rule describes the digest mail preferences",
					"HelpUrl": "www.homail.com",
					"IsHidden": true,
					"IsEnabledByDefault": true,
					"IsInPreview": false,
					"SupportsEmailNotifications": true
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/extension_billingdatavolumedailyspikeextension",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "extension_billingdatavolumedailyspikeextension",
					"DisplayName": "Abnormal rise in daily data volume (preview)",
					"Description": "This detection rule automatically analyzes the billing data generated by your application, and can warn you about an unusual increase in your application's billing costs",
					"HelpUrl": "https://github.com/Microsoft/ApplicationInsights-Home/tree/master/SmartDetection/billing-data-volume-daily-spike.md",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": true,
					"SupportsEmailNotifications": false
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/extension_canaryextension",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "extension_canaryextension",
					"DisplayName": "Canary extension",
					"Description": "Canary extension",
					"HelpUrl": "https://github.com/Microsoft/ApplicationInsights-Home/blob/master/SmartDetection/",
					"IsHidden": true,
					"IsEnabledByDefault": true,
					"IsInPreview": true,
					"SupportsEmailNotifications": false
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/extension_exceptionchangeextension",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "extension_exceptionchangeextension",
					"DisplayName": "Abnormal rise in exception volume (preview)",
					"Description": "This detection rule automatically analyzes the exceptions thrown in your application, and can warn you about unusual patterns in your exception telemetry.",
					"HelpUrl": "https://github.com/Microsoft/ApplicationInsights-Home/blob/master/SmartDetection/abnormal-rise-in-exception-volume.md",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": true,
					"SupportsEmailNotifications": false
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/extension_memoryleakextension",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "extension_memoryleakextension",
					"DisplayName": "Potential memory leak detected (preview)",
					"Description": "This detection rule automatically analyzes the memory consumption of each process in your application, and can warn you about potential memory leaks or increased memory consumption.",
					"HelpUrl": "https://github.com/Microsoft/ApplicationInsights-Home/tree/master/SmartDetection/memory-leak.md",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": true,
					"SupportsEmailNotifications": false
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/extension_securityextensionspackage",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "extension_securityextensionspackage",
					"DisplayName": "Potential security issue detected (preview)",
					"Description": "This detection rule automatically analyzes the telemetry generated by your application and detects potential security issues.",
					"HelpUrl": "https://github.com/Microsoft/ApplicationInsights-Home/blob/master/SmartDetection/application-security-detection-pack.md",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": true,
					"SupportsEmailNotifications": false
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/extension_traceseveritydetector",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "extension_traceseveritydetector",
					"DisplayName": "Degradation in trace severity ratio (preview)",
					"Description": "This detection rule automatically analyzes the trace logs emitted from your application, and can warn you about unusual patterns in the severity of your trace telemetry.",
					"HelpUrl": "https://github.com/Microsoft/ApplicationInsights-Home/blob/master/SmartDetection/degradation-in-trace-severity-ratio.md",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": true,
					"SupportsEmailNotifications": false
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/longdependencyduration",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "longdependencyduration",
					"DisplayName": "Long dependency duration",
					"Description": "Smart Detection rules notify you of performance anomaly issues.",
					"HelpUrl": "https://docs.microsoft.com/en-us/azure/application-insights/app-insights-proactive-performance-diagnostics",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": false,
					"SupportsEmailNotifications": true
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/migrationToAlertRulesCompleted",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "migrationToAlertRulesCompleted",
					"DisplayName": "Migration To Alert Rules Completed",
					"Description": "A configuration that controls the migration state of Smart Detection to Smart Alerts",
					"HelpUrl": "https://docs.microsoft.com/en-us/azure/application-insights/app-insights-proactive-performance-diagnostics",
					"IsHidden": true,
					"IsEnabledByDefault": false,
					"IsInPreview": true,
					"SupportsEmailNotifications": false
				},
				"enabled": false,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/slowpageloadtime",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "slowpageloadtime",
					"DisplayName": "Slow page load time",
					"Description": "Smart Detection rules notify you of performance anomaly issues.",
					"HelpUrl": "https://docs.microsoft.com/en-us/azure/application-insights/app-insights-proactive-performance-diagnostics",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": false,
					"SupportsEmailNotifications": true
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "microsoft.insights/components/ProactiveDetectionConfigs",
			"apiVersion": "2018-05-01-preview",
			"name": "josh-function-app/slowserverresponsetime",
			"location": "centralus",
			"dependsOn": [ "[resourceId('microsoft.insights/components', 'josh-function-app')]" ],
			"properties": {
				"ruleDefinitions": {
					"Name": "slowserverresponsetime",
					"DisplayName": "Slow server response time",
					"Description": "Smart Detection rules notify you of performance anomaly issues.",
					"HelpUrl": "https://docs.microsoft.com/en-us/azure/application-insights/app-insights-proactive-performance-diagnostics",
					"IsHidden": false,
					"IsEnabledByDefault": true,
					"IsInPreview": false,
					"SupportsEmailNotifications": true
				},
				"enabled": true,
				"sendEmailsToSubscriptionOwners": true,
				"customEmails": []
			}
		},
		{
			"type": "Microsoft.Network/networkInterfaces",
			"apiVersion": "2020-08-01",
			"name": "blob-endpoint.nic.056ace71-d100-430f-8e00-6c55e9e5a90d",
			"location": "centralus",
			"dependsOn": [ "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" ],
			"properties": {
				"ipConfigurations": [
					{
						"name": "blob-blob.privateEndpoint",
						"properties": {
							"privateIPAddress": "10.1.0.5",
							"privateIPAllocationMethod": "Dynamic",
							"subnet": { "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" },
							"primary": true,
							"privateIPAddressVersion": "IPv4"
						}
					}
				],
				"dnsSettings": { "dnsServers": [] },
				"enableAcceleratedNetworking": false,
				"enableIPForwarding": false
			}
		},
		{
			"type": "Microsoft.Network/networkInterfaces",
			"apiVersion": "2020-08-01",
			"name": "file-endpoint.nic.ba6c0cf0-ac04-434d-8e5b-9327d0aaea1c",
			"location": "centralus",
			"dependsOn": [ "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" ],
			"properties": {
				"ipConfigurations": [
					{
						"name": "file-file.privateEndpoint",
						"properties": {
							"privateIPAddress": "10.1.0.4",
							"privateIPAllocationMethod": "Dynamic",
							"subnet": { "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" },
							"primary": true,
							"privateIPAddressVersion": "IPv4"
						}
					}
				],
				"dnsSettings": { "dnsServers": [] },
				"enableAcceleratedNetworking": false,
				"enableIPForwarding": false
			}
		},
		{
			"type": "Microsoft.Network/networkInterfaces",
			"apiVersion": "2020-08-01",
			"name": "functionapp-endpoint.nic.601702ba-befe-4257-aa18-9f3d6db1fe7a",
			"location": "centralus",
			"dependsOn": [ "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" ],
			"properties": {
				"ipConfigurations": [
					{
						"name": "sites-sites.privateEndpoint",
						"properties": {
							"privateIPAddress": "10.1.0.7",
							"privateIPAllocationMethod": "Dynamic",
							"subnet": { "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" },
							"primary": true,
							"privateIPAddressVersion": "IPv4"
						}
					}
				],
				"dnsSettings": { "dnsServers": [] },
				"enableAcceleratedNetworking": false,
				"enableIPForwarding": false
			}
		},
		{
			"type": "Microsoft.Network/networkInterfaces",
			"apiVersion": "2020-08-01",
			"name": "sb-endpoint.nic.7b64b119-8701-4583-87ef-ebd7354abbdd",
			"location": "centralus",
			"dependsOn": [ "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" ],
			"properties": {
				"ipConfigurations": [
					{
						"name": "namespace-namespace.privateEndpoint",
						"properties": {
							"privateIPAddress": "10.1.0.6",
							"privateIPAllocationMethod": "Dynamic",
							"subnet": { "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" },
							"primary": true,
							"privateIPAddressVersion": "IPv4"
						}
					}
				],
				"dnsSettings": { "dnsServers": [] },
				"enableAcceleratedNetworking": false,
				"enableIPForwarding": false
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/A",
			"apiVersion": "2018-09-01",
			"name": "privatelink.azurewebsites.net/josh-function-app",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.azurewebsites.net')]" ],
			"properties": {
				"metadata": { "creator": "created by private endpoint functionapp-endpoint with resource guid 0cd796b7-6978-45ad-9035-2226b243cd0c" },
				"ttl": 10,
				"aRecords": [ { "ipv4Address": "10.1.0.7" } ]
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/A",
			"apiVersion": "2018-09-01",
			"name": "privatelink.azurewebsites.net/josh-function-app.scm",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.azurewebsites.net')]" ],
			"properties": {
				"metadata": { "creator": "created by private endpoint functionapp-endpoint with resource guid 0cd796b7-6978-45ad-9035-2226b243cd0c" },
				"ttl": 10,
				"aRecords": [ { "ipv4Address": "10.1.0.7" } ]
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/A",
			"apiVersion": "2018-09-01",
			"name": "privatelink.blob.core.windows.net/joshsecurestorage",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.blob.core.windows.net')]" ],
			"properties": {
				"metadata": { "creator": "created by private endpoint blob-endpoint with resource guid 5c5fd830-198e-42ef-a899-0e76a0b07947" },
				"ttl": 10,
				"aRecords": [ { "ipv4Address": "10.1.0.5" } ]
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/A",
			"apiVersion": "2018-09-01",
			"name": "privatelink.file.core.windows.net/joshsecurestorage",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.file.core.windows.net')]" ],
			"properties": {
				"metadata": { "creator": "created by private endpoint file-endpoint with resource guid 1bd9aaa5-15e4-49ea-950e-6c9fce401bbd" },
				"ttl": 10,
				"aRecords": [ { "ipv4Address": "10.1.0.4" } ]
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/A",
			"apiVersion": "2018-09-01",
			"name": "privatelink.servicebus.windows.net/joshservicebus",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.servicebus.windows.net')]" ],
			"properties": {
				"metadata": { "creator": "created by private endpoint sb-endpoint with resource guid c97107ae-6a52-4666-a939-cc2e40d3bd4b" },
				"ttl": 10,
				"aRecords": [ { "ipv4Address": "10.1.0.6" } ]
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/SOA",
			"apiVersion": "2018-09-01",
			"name": "privatelink.azurewebsites.net/@",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.azurewebsites.net')]" ],
			"properties": {
				"ttl": 3600,
				"soaRecord": {
					"email": "azureprivatedns-host.microsoft.com",
					"expireTime": 2419200,
					"host": "azureprivatedns.net",
					"minimumTtl": 10,
					"refreshTime": 3600,
					"retryTime": 300,
					"serialNumber": 1
				}
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/SOA",
			"apiVersion": "2018-09-01",
			"name": "privatelink.blob.core.windows.net/@",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.blob.core.windows.net')]" ],
			"properties": {
				"ttl": 3600,
				"soaRecord": {
					"email": "azureprivatedns-host.microsoft.com",
					"expireTime": 2419200,
					"host": "azureprivatedns.net",
					"minimumTtl": 10,
					"refreshTime": 3600,
					"retryTime": 300,
					"serialNumber": 1
				}
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/SOA",
			"apiVersion": "2018-09-01",
			"name": "privatelink.file.core.windows.net/@",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.file.core.windows.net')]" ],
			"properties": {
				"ttl": 3600,
				"soaRecord": {
					"email": "azureprivatedns-host.microsoft.com",
					"expireTime": 2419200,
					"host": "azureprivatedns.net",
					"minimumTtl": 10,
					"refreshTime": 3600,
					"retryTime": 300,
					"serialNumber": 1
				}
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/SOA",
			"apiVersion": "2018-09-01",
			"name": "privatelink.servicebus.windows.net/@",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.servicebus.windows.net')]" ],
			"properties": {
				"ttl": 3600,
				"soaRecord": {
					"email": "azureprivatedns-host.microsoft.com",
					"expireTime": 2419200,
					"host": "azureprivatedns.net",
					"minimumTtl": 10,
					"refreshTime": 3600,
					"retryTime": 300,
					"serialNumber": 1
				}
			}
		},
		{
			"type": "Microsoft.Network/virtualNetworks/subnets",
			"apiVersion": "2020-08-01",
			"name": "functionVNET/default",
			"dependsOn": [ "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" ],
			"properties": {
				"addressPrefix": "10.1.0.0/24",
				"delegations": [],
				"privateEndpointNetworkPolicies": "Disabled",
				"privateLinkServiceNetworkPolicies": "Enabled"
			}
		},
		{
			"type": "Microsoft.Network/virtualNetworks/subnets",
			"apiVersion": "2020-08-01",
			"name": "functionVNET/functions",
			"dependsOn": [ "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" ],
			"properties": {
				"addressPrefix": "10.1.1.0/24",
				"delegations": [
					{
						"name": "delegation",
						"properties": { "serviceName": "Microsoft.Web/serverfarms" }
					}
				],
				"privateEndpointNetworkPolicies": "Enabled",
				"privateLinkServiceNetworkPolicies": "Enabled"
			}
		},
		{
			"type": "Microsoft.ServiceBus/namespaces/AuthorizationRules",
			"apiVersion": "2017-04-01",
			"name": "joshServiceBus/RootManageSharedAccessKey",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.ServiceBus/namespaces', 'joshServiceBus')]" ],
			"properties": { "rights": [ "Listen", "Manage", "Send" ] }
		},
		{
			"type": "Microsoft.ServiceBus/namespaces/networkRuleSets",
			"apiVersion": "2018-01-01-preview",
			"name": "joshServiceBus/default",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.ServiceBus/namespaces', 'joshServiceBus')]" ],
			"properties": {
				"defaultAction": "Deny",
				"virtualNetworkRules": [],
				"ipRules": []
			}
		},
		{
			"type": "Microsoft.ServiceBus/namespaces/queues",
			"apiVersion": "2018-01-01-preview",
			"name": "joshServiceBus/queue",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.ServiceBus/namespaces', 'joshServiceBus')]" ],
			"properties": {
				"lockDuration": "PT30S",
				"maxSizeInMegabytes": 1024,
				"requiresDuplicateDetection": false,
				"requiresSession": false,
				"defaultMessageTimeToLive": "P14D",
				"deadLetteringOnMessageExpiration": false,
				"enableBatchedOperations": true,
				"duplicateDetectionHistoryTimeWindow": "PT10M",
				"maxDeliveryCount": 10,
				"status": "Active",
				"autoDeleteOnIdle": "P10675199DT2H48M5.4775807S",
				"enablePartitioning": false,
				"enableExpress": false
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/blobServices",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/default",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"sku": {
				"name": "Standard_RAGRS",
				"tier": "Standard"
			},
			"properties": {
				"cors": { "corsRules": [] },
				"deleteRetentionPolicy": { "enabled": false }
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/blobServices",
			"apiVersion": "2021-01-01",
			"name": "storageaccountjoshfa6db/default",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'storageaccountjoshfa6db')]" ],
			"sku": {
				"name": "Standard_LRS",
				"tier": "Standard"
			},
			"properties": {
				"cors": { "corsRules": [] },
				"deleteRetentionPolicy": { "enabled": false }
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/fileServices",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/default",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"sku": {
				"name": "Standard_RAGRS",
				"tier": "Standard"
			},
			"properties": {
				"protocolSettings": { "smb": {} },
				"cors": { "corsRules": [] },
				"shareDeleteRetentionPolicy": {
					"enabled": true,
					"days": 7
				}
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/fileServices",
			"apiVersion": "2021-01-01",
			"name": "storageaccountjoshfa6db/default",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'storageaccountjoshfa6db')]" ],
			"sku": {
				"name": "Standard_LRS",
				"tier": "Standard"
			},
			"properties": {
				"protocolSettings": { "smb": {} },
				"cors": { "corsRules": [] },
				"shareDeleteRetentionPolicy": {
					"enabled": true,
					"days": 7
				}
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/privateEndpointConnections",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/joshsecurestorage.0a981397-4279-4f55-a98e-2bcb47036dea",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"properties": {
				"provisioningState": "Succeeded",
				"privateEndpoint": {},
				"privateLinkServiceConnectionState": {
					"status": "Approved",
					"description": "Auto-Approved",
					"actionRequired": "None"
				}
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/privateEndpointConnections",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/joshsecurestorage.6132aaf4-012f-44c5-b334-e18f719ce949",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"properties": {
				"provisioningState": "Succeeded",
				"privateEndpoint": {},
				"privateLinkServiceConnectionState": {
					"status": "Approved",
					"description": "Auto-Approved",
					"actionRequired": "None"
				}
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/queueServices",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/default",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"properties": { "cors": { "corsRules": [] } }
		},
		{
			"type": "Microsoft.Storage/storageAccounts/queueServices",
			"apiVersion": "2021-01-01",
			"name": "storageaccountjoshfa6db/default",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'storageaccountjoshfa6db')]" ],
			"properties": { "cors": { "corsRules": [] } }
		},
		{
			"type": "Microsoft.Storage/storageAccounts/tableServices",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/default",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"properties": { "cors": { "corsRules": [] } }
		},
		{
			"type": "Microsoft.Storage/storageAccounts/tableServices",
			"apiVersion": "2021-01-01",
			"name": "storageaccountjoshfa6db/default",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'storageaccountjoshfa6db')]" ],
			"properties": { "cors": { "corsRules": [] } }
		},
		{
			"type": "Microsoft.Web/sites",
			"apiVersion": "2018-11-01",
			"name": "josh-function-app",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.Web/serverfarms', 'ASP-joshfunctiontutorial-9c13')]" ],
			"kind": "functionapp",
			"properties": {
				"enabled": true,
				"hostNameSslStates": [
					{
						"name": "josh-function-app.azurewebsites.net",
						"sslState": "Disabled",
						"hostType": "Standard"
					},
					{
						"name": "josh-function-app.scm.azurewebsites.net",
						"sslState": "Disabled",
						"hostType": "Repository"
					}
				],
				"serverFarmId": "[resourceId('Microsoft.Web/serverfarms', 'ASP-joshfunctiontutorial-9c13')]",
				"reserved": false,
				"isXenon": false,
				"hyperV": false,
				"siteConfig": {},
				"scmSiteAlsoStopped": false,
				"clientAffinityEnabled": false,
				"clientCertEnabled": false,
				"hostNamesDisabled": false,
				"containerSize": 1536,
				"dailyMemoryTimeQuota": 0,
				"httpsOnly": false,
				"redundancyMode": "None"
			}
		},
		{
			"type": "Microsoft.Web/sites/config",
			"apiVersion": "2018-11-01",
			"name": "josh-function-app/web",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.Web/sites', 'josh-function-app')]" ],
			"properties": {
				"numberOfWorkers": 1,
				"defaultDocuments": [ "Default.htm", "Default.html", "Default.asp", "index.htm", "index.html", "iisstart.htm", "default.aspx", "index.php" ],
				"netFrameworkVersion": "v4.0",
				"phpVersion": "5.6",
				"requestTracingEnabled": false,
				"remoteDebuggingEnabled": false,
				"remoteDebuggingVersion": "VS2019",
				"httpLoggingEnabled": false,
				"logsDirectorySizeLimit": 35,
				"detailedErrorLoggingEnabled": false,
				"publishingUsername": "$josh-function-app",
				"azureStorageAccounts": {},
				"scmType": "GitHubAction",
				"use32BitWorkerProcess": true,
				"webSocketsEnabled": false,
				"alwaysOn": false,
				"managedPipelineMode": "Integrated",
				"virtualApplications": [
					{
						"virtualPath": "/",
						"physicalPath": "site\\wwwroot",
						"preloadEnabled": false
					}
				],
				"loadBalancing": "LeastRequests",
				"experiments": { "rampUpRules": [] },
				"autoHealEnabled": false,
				"vnetName": "0169e099-3079-4f08-aa13-f1bf96a16dc4_functions",
				"cors": {
					"allowedOrigins": [ "https://functions.azure.com", "https://functions-staging.azure.com", "https://functions-next.azure.com" ],
					"supportCredentials": false
				},
				"localMySqlEnabled": false,
				"ipSecurityRestrictions": [
					{
						"ipAddress": "Any",
						"action": "Allow",
						"priority": 1,
						"name": "Allow all",
						"description": "Allow all access"
					}
				],
				"scmIpSecurityRestrictions": [
					{
						"ipAddress": "Any",
						"action": "Allow",
						"priority": 1,
						"name": "Allow all",
						"description": "Allow all access"
					}
				],
				"scmIpSecurityRestrictionsUseMain": false,
				"http20Enabled": false,
				"minTlsVersion": "1.2",
				"ftpsState": "AllAllowed",
				"reservedInstanceCount": 1
			}
		},
		{
			"type": "Microsoft.Web/sites/deployments",
			"apiVersion": "2018-11-01",
			"name": "josh-function-app/1b49a4867f8a47f8965cedc0d295ae86",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.Web/sites', 'josh-function-app')]" ],
			"properties": {
				"status": 4,
				"author_email": "N/A",
				"author": "N/A",
				"deployer": "GITHUB_ZIP_DEPLOY",
				"message": "Created via a push deployment",
				"start_time": "2021-04-07T20:52:14.4047852Z",
				"end_time": "2021-04-07T20:52:45.6838303Z",
				"active": false
			}
		},
		{
			"type": "Microsoft.Web/sites/deployments",
			"apiVersion": "2018-11-01",
			"name": "josh-function-app/dafbbbb8213732ff0f6c2db735f0da4586c7be711617828767545",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.Web/sites', 'josh-function-app')]" ],
			"properties": {
				"status": 4,
				"author": "Joshua-Phelps",
				"deployer": "GitHub",
				"message": "{\"type\":\"Deployment\",\"sha\":\"dafbbbb8213732ff0f6c2db735f0da4586c7be71\",\"repoName\":\"Joshua-Phelps/functions-vnet-tutorial\",\"slotName\":\"production\"}",
				"start_time": "2021-04-07T20:52:47.7946318Z",
				"end_time": "2021-04-07T20:52:47.7946318Z",
				"active": true
			}
		},
		{
			"type": "Microsoft.Web/sites/functions",
			"apiVersion": "2018-11-01",
			"name": "josh-function-app/HttpTrigger",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.Web/sites', 'josh-function-app')]" ],
			"properties": {
				"script_root_path_href": "https://josh-function-app.azurewebsites.net/admin/vfs/site/wwwroot/HttpTrigger/",
				"script_href": "https://josh-function-app.azurewebsites.net/admin/vfs/site/wwwroot/bin/vnet-tutorial.dll",
				"config_href": "https://josh-function-app.azurewebsites.net/admin/vfs/site/wwwroot/HttpTrigger/function.json",
				"href": "https://josh-function-app.azurewebsites.net/admin/functions/HttpTrigger",
				"config": {}
			}
		},
		{
			"type": "Microsoft.Web/sites/functions",
			"apiVersion": "2018-11-01",
			"name": "josh-function-app/ServiceBusQueueTrigger",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.Web/sites', 'josh-function-app')]" ],
			"properties": {
				"script_root_path_href": "https://josh-function-app.azurewebsites.net/admin/vfs/site/wwwroot/ServiceBusQueueTrigger/",
				"script_href": "https://josh-function-app.azurewebsites.net/admin/vfs/site/wwwroot/bin/vnet-tutorial.dll",
				"config_href": "https://josh-function-app.azurewebsites.net/admin/vfs/site/wwwroot/ServiceBusQueueTrigger/function.json",
				"href": "https://josh-function-app.azurewebsites.net/admin/functions/ServiceBusQueueTrigger",
				"config": {}
			}
		},
		{
			"type": "Microsoft.Web/sites/hostNameBindings",
			"apiVersion": "2018-11-01",
			"name": "josh-function-app/josh-function-app.azurewebsites.net",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.Web/sites', 'josh-function-app')]" ],
			"properties": {
				"siteName": "josh-function-app",
				"hostNameType": "Verified"
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/virtualNetworkLinks",
			"apiVersion": "2018-09-01",
			"name": "privatelink.azurewebsites.net/08e49d35f35ad",
			"location": "global",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.azurewebsites.net')]", "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" ],
			"properties": {
				"registrationEnabled": false,
				"virtualNetwork": { "id": "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" }
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/virtualNetworkLinks",
			"apiVersion": "2018-09-01",
			"name": "privatelink.blob.core.windows.net/rilj7pmzlo3uu",
			"location": "global",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.blob.core.windows.net')]", "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" ],
			"properties": {
				"registrationEnabled": false,
				"virtualNetwork": { "id": "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" }
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/virtualNetworkLinks",
			"apiVersion": "2018-09-01",
			"name": "privatelink.file.core.windows.net/rilj7pmzlo3uu",
			"location": "global",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.file.core.windows.net')]", "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" ],
			"properties": {
				"registrationEnabled": false,
				"virtualNetwork": { "id": "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" }
			}
		},
		{
			"type": "Microsoft.Network/privateDnsZones/virtualNetworkLinks",
			"apiVersion": "2018-09-01",
			"name": "privatelink.servicebus.windows.net/rilj7pmzlo3uu",
			"location": "global",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.servicebus.windows.net')]", "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" ],
			"properties": {
				"registrationEnabled": false,
				"virtualNetwork": { "id": "[resourceId('Microsoft.Network/virtualNetworks', 'functionVNET')]" }
			}
		},
		{
			"type": "Microsoft.Network/privateEndpoints",
			"apiVersion": "2020-08-01",
			"name": "blob-endpoint",
			"location": "centralus",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]", "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" ],
			"properties": {
				"privateLinkServiceConnections": [
					{
						"name": "blob-endpoint",
						"properties": {
							"privateLinkServiceId": "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]",
							"groupIds": [ "blob" ],
							"privateLinkServiceConnectionState": {
								"status": "Approved",
								"description": "Auto-Approved",
								"actionsRequired": "None"
							}
						}
					}
				],
				"manualPrivateLinkServiceConnections": [],
				"subnet": { "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" },
				"customDnsConfigs": []
			}
		},
		{
			"type": "Microsoft.Network/privateEndpoints",
			"apiVersion": "2020-08-01",
			"name": "file-endpoint",
			"location": "centralus",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]", "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" ],
			"properties": {
				"privateLinkServiceConnections": [
					{
						"name": "file-endpoint",
						"properties": {
							"privateLinkServiceId": "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]",
							"groupIds": [ "file" ],
							"privateLinkServiceConnectionState": {
								"status": "Approved",
								"description": "Auto-Approved",
								"actionsRequired": "None"
							}
						}
					}
				],
				"manualPrivateLinkServiceConnections": [],
				"subnet": { "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" },
				"customDnsConfigs": []
			}
		},
		{
			"type": "Microsoft.Network/privateEndpoints",
			"apiVersion": "2020-08-01",
			"name": "functionapp-endpoint",
			"location": "centralus",
			"dependsOn": [ "[resourceId('Microsoft.Web/sites', 'josh-function-app')]", "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" ],
			"properties": {
				"privateLinkServiceConnections": [
					{
						"name": "functionapp-endpoint-a5c8",
						"properties": {
							"privateLinkServiceId": "[resourceId('Microsoft.Web/sites', 'josh-function-app')]",
							"groupIds": [ "sites" ],
							"privateLinkServiceConnectionState": {
								"status": "Approved",
								"actionsRequired": "None"
							}
						}
					}
				],
				"manualPrivateLinkServiceConnections": [],
				"subnet": { "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" },
				"customDnsConfigs": []
			}
		},
		{
			"type": "Microsoft.Network/privateEndpoints",
			"apiVersion": "2020-08-01",
			"name": "sb-endpoint",
			"location": "centralus",
			"dependsOn": [ "[resourceId('Microsoft.ServiceBus/namespaces', 'joshServiceBus')]", "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" ],
			"properties": {
				"privateLinkServiceConnections": [
					{
						"name": "sb-endpoint",
						"properties": {
							"privateLinkServiceId": "[resourceId('Microsoft.ServiceBus/namespaces', 'joshServiceBus')]",
							"groupIds": [ "namespace" ],
							"privateLinkServiceConnectionState": {
								"status": "Approved",
								"description": "Auto-Approved",
								"actionsRequired": "None"
							}
						}
					}
				],
				"manualPrivateLinkServiceConnections": [],
				"subnet": { "id": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'default')]" },
				"customDnsConfigs": []
			}
		},
		{
			"type": "Microsoft.Network/privateEndpoints/privateDnsZoneGroups",
			"apiVersion": "2020-08-01",
			"name": "blob-endpoint/default",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateEndpoints', 'blob-endpoint')]", "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.blob.core.windows.net')]" ],
			"properties": {
				"privateDnsZoneConfigs": [
					{
						"name": "privatelink-blob-core-windows-net",
						"properties": { "privateDnsZoneId": "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.blob.core.windows.net')]" }
					}
				]
			}
		},
		{
			"type": "Microsoft.Network/privateEndpoints/privateDnsZoneGroups",
			"apiVersion": "2020-08-01",
			"name": "file-endpoint/default",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateEndpoints', 'file-endpoint')]", "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.file.core.windows.net')]" ],
			"properties": {
				"privateDnsZoneConfigs": [
					{
						"name": "privatelink-file-core-windows-net",
						"properties": { "privateDnsZoneId": "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.file.core.windows.net')]" }
					}
				]
			}
		},
		{
			"type": "Microsoft.Network/privateEndpoints/privateDnsZoneGroups",
			"apiVersion": "2020-08-01",
			"name": "functionapp-endpoint/default",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateEndpoints', 'functionapp-endpoint')]", "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.azurewebsites.net')]" ],
			"properties": {
				"privateDnsZoneConfigs": [
					{
						"name": "privatelink-azurewebsites-net",
						"properties": { "privateDnsZoneId": "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.azurewebsites.net')]" }
					}
				]
			}
		},
		{
			"type": "Microsoft.Network/privateEndpoints/privateDnsZoneGroups",
			"apiVersion": "2020-08-01",
			"name": "sb-endpoint/default",
			"dependsOn": [ "[resourceId('Microsoft.Network/privateEndpoints', 'sb-endpoint')]", "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.servicebus.windows.net')]" ],
			"properties": {
				"privateDnsZoneConfigs": [
					{
						"name": "privatelink-servicebus-windows-net",
						"properties": { "privateDnsZoneId": "[resourceId('Microsoft.Network/privateDnsZones', 'privatelink.servicebus.windows.net')]" }
					}
				]
			}
		},
		{
			"type": "Microsoft.ServiceBus/namespaces/privateEndpointConnections",
			"apiVersion": "2018-01-01-preview",
			"name": "joshServiceBus/d4536b55-35e1-41fb-9576-4de08ea3c6b9",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.ServiceBus/namespaces', 'joshServiceBus')]", "[resourceId('Microsoft.Network/privateEndpoints', 'sb-endpoint')]" ],
			"properties": {
				"provisioningState": "Succeeded",
				"privateEndpoint": { "id": "[resourceId('Microsoft.Network/privateEndpoints', 'sb-endpoint')]" },
				"privateLinkServiceConnectionState": {
					"status": "Approved",
					"description": "Auto-Approved"
				}
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/blobServices/containers",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/default/azure-webjobs-hosts",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts/blobServices', 'joshsecurestorage', 'default')]", "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"properties": {
				"defaultEncryptionScope": "$account-encryption-key",
				"denyEncryptionScopeOverride": false,
				"publicAccess": "None"
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/blobServices/containers",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/default/azure-webjobs-secrets",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts/blobServices', 'joshsecurestorage', 'default')]", "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"properties": {
				"defaultEncryptionScope": "$account-encryption-key",
				"denyEncryptionScopeOverride": false,
				"publicAccess": "None"
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/blobServices/containers",
			"apiVersion": "2021-01-01",
			"name": "storageaccountjoshfa6db/default/azure-webjobs-hosts",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts/blobServices', 'storageaccountjoshfa6db', 'default')]", "[resourceId('Microsoft.Storage/storageAccounts', 'storageaccountjoshfa6db')]" ],
			"properties": {
				"defaultEncryptionScope": "$account-encryption-key",
				"denyEncryptionScopeOverride": false,
				"publicAccess": "None"
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/blobServices/containers",
			"apiVersion": "2021-01-01",
			"name": "storageaccountjoshfa6db/default/azure-webjobs-secrets",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts/blobServices', 'storageaccountjoshfa6db', 'default')]", "[resourceId('Microsoft.Storage/storageAccounts', 'storageaccountjoshfa6db')]" ],
			"properties": {
				"defaultEncryptionScope": "$account-encryption-key",
				"denyEncryptionScopeOverride": false,
				"publicAccess": "None"
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/fileServices/shares",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/default/files",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts/fileServices', 'joshsecurestorage', 'default')]", "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ],
			"properties": {
				"accessTier": "TransactionOptimized",
				"shareQuota": 5120,
				"enabledProtocols": "SMB"
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/fileServices/shares",
			"apiVersion": "2021-01-01",
			"name": "storageaccountjoshfa6db/default/josh-function-app8c51",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts/fileServices', 'storageaccountjoshfa6db', 'default')]", "[resourceId('Microsoft.Storage/storageAccounts', 'storageaccountjoshfa6db')]" ],
			"properties": {
				"accessTier": "TransactionOptimized",
				"shareQuota": 5120,
				"enabledProtocols": "SMB"
			}
		},
		{
			"type": "Microsoft.Storage/storageAccounts/tableServices/tables",
			"apiVersion": "2021-01-01",
			"name": "joshsecurestorage/default/AzureFunctionsScaleMetrics202104",
			"dependsOn": [ "[resourceId('Microsoft.Storage/storageAccounts/tableServices', 'joshsecurestorage', 'default')]", "[resourceId('Microsoft.Storage/storageAccounts', 'joshsecurestorage')]" ]
		},
		{
			"type": "Microsoft.Web/sites/virtualNetworkConnections",
			"apiVersion": "2018-11-01",
			"name": "josh-function-app/0169e099-3079-4f08-aa13-f1bf96a16dc4_functions",
			"location": "Central US",
			"dependsOn": [ "[resourceId('Microsoft.Web/sites', 'josh-function-app')]", "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'functions')]" ],
			"properties": {
				"vnetResourceId": "[resourceId('Microsoft.Network/virtualNetworks/subnets', 'functionVNET', 'functions')]",
				"isSwift": true
			}
		}
	]
}